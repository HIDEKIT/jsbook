<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <link href="../css/lib/bootstrap.css" rel="stylesheet">
    <link href="../css/cart.css" rel="stylesheet">
    <script type="text/javascript" src="../js/lib/jquery-1.7.2/jquery.js"></script>
    <script type="text/javascript" src="../js/lib/jsrender.js"></script>
    <script type="text/javascript" src="../js/cart.js"></script>
    <script type="text/javascript" src="../js/cart_item.js"></script>
    <script type="text/javascript">
      Cart.prototype.build_template = function(path, block) {
        $.ajax({
          url: path,
          dataType: "text",
          success: function(tmpl_text) {
            var cart_render = $.templates({cart: tmpl_text})
                               .render
                               .cart;
            block.call(this, cart_render);
          }.bind(this)
        });
      };
      Cart.prototype.render = function(template_path) {
        this.build_template(template_path, function(cart_render) {
          this.$root.html(
            cart_render(this)
          );
        });
      };
      $(function(){
        var cart = new Cart($("#target"), "旅費");
        cart.render("../templates/cart.html");
      });
    </script>
  </head>
  <body>
  <div class="container">
    <div id="target" class="row">
    </div>
  </div>
  </body>
</html>
